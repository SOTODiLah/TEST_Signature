# TEST_Signature
Создание сигнатуры файла по блоками заданной величены. Хэш MD5.

## Project VS2019
В реализации программы используются две стороние библиотеки:<br>
* CLI (для работы с командной строкой);
* CryptoPP (для реализации хэширования).
### Release x86
Компиляцию можно произвести в конфигурации Release x86.
```bash
git clone git://github.com/SOTODiLah/TEST_Signature.git
````
### Other config
Для компиляции иной конфигурации необходимо скачать и скопилировать библеотеку [CryptoPP](https://github.com/weidai11/cryptopp) в нужной вам конфигурации.
```bash
git clone git://github.com/weidai11/cryptopp
````

## Download program
В арихиве две программы: программа создания сигнатуры файла и программа создания файлов из случайного набора байт (для инструкции используете --help).
* Google Drive [ZIP](https://drive.google.com/file/d/1GqDWLeBzlBN6HFKwM0_RmM4ZLVnmyK5-/view?usp=sharing)

## Launch

Запуск программы осуществляет через командную строку.<br>
```bash
Options:
  -h,--help                   Вывод этого справочного сообщения.
  -i,--input TEXT             Путь до входного файла.
  -o,--output TEXT            Путь до выходного файла.
  -s,--sizeBuffer UINT        Размер буфера (блока файла).
````
## Struct project

### Class Signature

Класс содержит в себе бизнес-логику программы. Имеет только один метод "generate", который можно вызвать неограниченное количество раз для одного объекта.

### Class MultiSingleQueue

Класс очереди, основанный на блокировках. Реализует паттерн Multi producers - Single consumer. Единственный потребитель позволяет не блокировать обращение к данным; блокируется только удаление (pop) из очереди.

### Class AsyncDataReader

Класс чтения данных из файла в асинхронном потоке. С помощью функции обратного вызова передаёт данные другим потокам.

### Class AsyncDataWriter

Класс записи данных в файл в асинхронном потоке. Хранит данные в виде std::future для записи в MultiSingleQueue, что позволяет потоку ожидать готовности данных без лишней синхронизации и уведомлений.

### Class ThreadPool

Класс, создающий единоразово несколько потоков, которым в последствии назначаются задачи (наследники интерфейса ITask).

### Class ITask

Интерфейс/Абстрактный класс. Содержит неопределенный метод "run" и методы взаимодействия с флагом готовности задачи.

### Class HashTask : ITask

Класс задачи по хэшированию данных. Инициализируется данными в конструкторе класса. Имеет метод, возвращающий std::future хэша.

### Class IHasher

Интерфейс/Абстрактный класс. Содержит единственный метод "make", принимающий данные и возвращающий хэш в виде строки байт.

### Class HasherMD5 : IHasher

Класс создаёт MD5 хэш.

### Namespace Timers. Classes: Timer, AutoTimer, AverageOfTimer
Реализация таймеров на основе библиотеки std::chrono. 

#### Timer 
Замеряет время между вызовами методов "begin" и "end". 

#### AutoTimer 
Замеряет время с момента вызова конструктора до вызова деструктора. Используется композиция с классом Timer.

#### AverageOfTimer
Замеряет среднее и общее время между многочисленными вызовами методов "begin" и "end". 

